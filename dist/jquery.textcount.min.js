/*
 *  jQuery Textcount - v0.5
 *  A jQuery plugin for counting text (total chars or non html chars) of form field values
 *  https://github.com/placenamehere/textcount
 *
 *  Made by Chris Casciano
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.options=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="textcount",d={prefix:"tc",triggerEvent:"click"};b.prototype={init:function(){var b,c,d=this,e=a(d.element),f=e.next(),g=e.attr("maxlength"),h=e.data(d.options.prefix+"-max-visible"),i=!1;b=f&&f.is("."+d.options.prefix+"-hint")?f:a("<span class='"+d.options.prefix+"-hint'></span>").insertAfter(e),c=e.data(d.options.prefix+"-ignore-html")?a("<div>"+e.val()+"</div>").text().length:e.val().length,g?b.html(g-c+" total characters left of "+g):h&&e.data(d.options.prefix+"-ignore-html")?(b.html(h-c+" visible characters left of "+h),0>h-c&&(i=!0)):e.data(d.options.prefix+"-ignore-html")?b.html(c+" visible characters"):b.html(c+" total characters"),e.data(d.options.prefix+"-ignore-html")&&(e.val().match(/</g)||[]).length!==(e.val().match(/>/g)||[]).length&&(i=!0),i?b.addClass(d.options.prefix+"-error"):b.removeClass(d.options.prefix+"-error"),e.keyup(function(){var b,c=a(this),e=c.next("."+d.options.prefix+"-hint"),f=c.attr("maxlength"),g=c.data(d.options.prefix+"-max-visible"),h=!1;b=c.data(d.options.prefix+"-ignore-html")?a("<div>"+c.val()+"</div>").text().length:c.val().length,f?e.html(f-b+" total characters left of "+f):g&&c.data(d.options.prefix+"-ignore-html")?(e.html(g-b+" visible characters left of "+g),0>g-b&&(h=!0)):c.data(d.options.prefix+"-ignore-html")?e.html(b+" visible characters"):e.html(b+" total characters"),c.data(d.options.prefix+"-ignore-html")&&(c.val().match(/</g)||[]).length!==(c.val().match(/>/g)||[]).length&&(h=!0),h?e.addClass(d.options.prefix+"-error"):e.removeClass(d.options.prefix+"-error")})}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);